{% extends 'layout.twig' %}

{% block body %}
	<div class="user-form2" id="userform2">
		<div class="right">
			<form class="accountWrapper">
				<fieldset>
					{{ i18n.__("Your Receiving Address") }}
					<div class="input-group">
					  <input id="toaccount" type="text" name="toaccount" class="form-control" autofocus readonly value="{{loadedAccount}}" />
					  <div class="input-group-append">
						<button data-clipboard-target="#toaccount" class="btn btn-primary nimmu-user-sibmit-button" type="button" id="copyaddress" style="height: 55px; width: 55px; border-top-left-radius:0px; border-bottom-left-radius:0px;">
							<svg style="width:26px; height:26px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#fff" d="M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"/></svg>
						</button>
					  </div>
					</div>

					<div style="text-align:center;">
						<span id="qrcode"></span>
					</div>
				</fieldset>
			</form>
		</div>
	</div>
{% endblock %}
{% block javascripts %}
<script>window.QRCode = require('qrcode');</script>
<script>

$(document).ready(function() {

	QRCode.toDataURL("{{loadedAccount}}", function (err, url) {
		if(err) return console.log("error occurred")
		
		$('#qrcode').html("<img style='width:300px;' src='" + url + "'>");
	})

  	new ClipboardJS('#copyaddress');
  	
  	$('#copyaddress').popover({trigger: 'focus', content: "{{ i18n.__("Copied") }}", delay: { "hide": 900 }});
	
	
});    

</script>
{% endblock %}